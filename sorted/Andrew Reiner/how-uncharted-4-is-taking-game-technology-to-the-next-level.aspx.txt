
  How Uncharted 4 Is Taking Game Technology To The Next Level






In our visit to Naughty Dog’s office last month, we talked extensively with the development team about the technology behind Uncharted 4: A Thief’s End, and the challenges tied to bringing this beloved series to PlayStation 4. The team is tapping the PlayStation 4 to enhance every aspect of the Uncharted experience, increasing the memory footprint by more than 10 times that of The Last of Us and the previous Uncharted titles. Although the PlayStation 4 allows the freedom to alter or expand the scope of Uncharted, Naughty Dog is adamant that the enhancements cannot change the identity of the game. It must be immediately recognizable for the people who played the series on PlayStation 3.Some of the technological additions are designed to simultaneously push the PlayStation 4 hardware to the limit and reflect the first Uncharted game Naughty Dog crafted in 2007. One such element is the animation system. All of Nathan Drake’s animations are new in Uncharted 4, but they are designed to feel familiar. “We didn’t want Nathan to feel like a new character,” says lead animator Jeremy Yates. “We want to keep the signature he has. We just want a more grounded and elegant version of it.”The animators at Naughty Dog are also making great strides to limit the repetition of Drake’s movements. In the first three Uncharted titles, two different animations were used when Drake would pick up ammunition: one for standing and one running. In Uncharted 4, Naughty Dog has created over 60 animations for the pick-up action.
Yates says that Nathan’s climbing animations alone use more memory than Drake’s entire moveset from Uncharted 3. The climbing system has been rewritten from the ground up, and now includes a reach mechanic that allows players to move Drake’s hand to pinpoint where he should move next. “All of the different combinations and possibilities of where he can put his hand required us to have hundreds of new climbing animations,” Yates adds. “We wanted to create a system that scaled really well and had a more grounded feel, but could also scale up to give Drake the agility he needs for fast-paced traversal combat.”Yates and some of Naughty Dog’s animators trained with climbers on indoor walls to understand the true nuances of rock climbing. “What it came down to was balance, and leaning, and reaching,” Yates says. “We wanted to capture that essence here. Every climb has a different animation. It’s been a tremendous effort. We have full-body inverse kinematics and full-body physics systems that fill in all of the nuances and help smooth out the animations.”Drake’s animations also change depending on what type of ledge he is interacting with. The handholds have different properties and affect the way he climbs. The larger handholds allow him to move faster and recover quickly. On the smaller handholds, Nathan’s hands act differently. His fingers are together, and his movements are slower, more calculated. His body shakes on the smaller ledges, showing he’s exerting more effort. “It adds a sense of danger,” Yates adds. “We’ve never been able to achieve stuff like this before. We’re trying to capture every detail in the climbing system.”
Naughty Dog has the same ambitions for the melee system, which has also been reworked for Uncharted 4. One of the goals for the hand-to-hand combat was to steer away from quicktime events. This means no UI, and no moments where the player hits a button to watch a sequence unfold. 
Yates says they want each hit and movement to be on the stick and buttons."We also want more contextual animations," he says. "If Drake has a pistol in his hand, his animations will be different. If he has an assault rifle, those animations will be different. These difference are subtle, but you can see they are there.”The melee combat mechanic places a greater emphasis on timing and reading an opponent’s moves than we've seen in the series. Using a technique called pose matching, Naughty Dog is able to make the moves flow in and out of each other based on the position of the combatants. In previous Uncharted titles, no matter what positions the characters were in, the next move was randomly selected, and didn’t necessarily flow from the character’s position. In Uncharted 4, pose matching ensures that the proper moves are used next and that there’s a natural flow to the transitional animations.
Another big breakthrough tied to the melee component is the decoupling of animations between Drake and his opponent. This means that the enemy no longer slides unnaturally to lineup with Drake's animations. “Sometimes they’ll synch when they are grappling together, but all of the openers and attacks that get you into position are completed unsynced," Yates says. "The hit reactions have nothing to do with the animation from the attacker. It’s all based on the angle from which Drake punches, and where he hits them on the body. We have a huge library of hit reactions. It’s very dynamic, and you can come at it from any angle. It’s not just ‘Okay, we have front, left, right, and diagonals.’ It’s anything, and it feels so much better.”These actions are viewed intimately through a new procedural camera system that Naughty Dog implemented just for combat. In previous games, Naughty Dog built cameras into the moves themselves. When the move was used, the game would do a quick check for the best camera position and activate that viewpoint. The new procedural system in Uncharted 4 finds the best angle to frame Drake and the enemy, along with anyone else who may be a threat. These dynamic cameras are not locked – players can interact with them in the same way they use the game's standard camera controls.
The mercenaries Drake squares off against are more formidable than the human enemies seen in the other Uncharted games. They communicate with other foes in the field, coordinate tactics, and find the optimal path to attack Drake or reach his location – even if it means they have to leap across caverns.
“You are going to see different roles expanded into the A.I. systems,” says director Bruce Straley. “Some of the enemies, like surveyors and overwatchers, communicate things they see inside of the environment. We also have helpers who watch each other’s backs, communicate, and split up into areas as they search. We have a richer system as to how the player gets to engage with and toy with the A.I.“In the Last of Us, we didn’t have as many traversal mechanics. Just getting behind a car was an important thing, or getting to a building was huge because it would afford more opportunities to evade and flank. Here, Nathan Drake can run faster, he can jump and swing on a rope. He chews up environment so quickly that that’s why we have the group mentality, and the splitting and factioning of guys like, ‘You go left, I go right.’ We’ve addressed their ability to fluidly move in the environment, such as run, jump, drop, and all of the traversal moves. They don’t quite parallel Nathan Drake – he still has a leg up – but they have high-powered weapons and projectiles as well. The A.I. is quick on their feet and thinks fluidly.”

The A.I.’s boost in intelligence and mobility is also present in Drake’s A.I. companions. For the majority of the adventure, Drake will have an A.I. companion at his side. Some of these people, like his brother Sam, are just as skilled at environment navigation as he is.Sam knows how to handle situations and he can take care of himself. He has his own rope, and as Straley says with a smile, "he can do some pretty amazing things."Outside of the gameplay enhancements, Naughty Dog is pushing Uncharted's visual fidelity significantly. The team is implementing little touches like Drake's chest hairs having the weight and physics that allow them to flow in the wind. The muscles in Drake’s neck fold over, the veins in his arms emerge when he exerts himself, his lips stick together when he opens his mouth, and there are almost 1,200 bones (or moving parts) in his face. In Uncharted 3, his face consisted of around 250 bones.When Drake steps into a waterfall, Naughty Dog has created a mask that allows the water to procedurally move down Drake’s body like water should. That means some of his body can be wet or dry, depending on where the water hits him. When his hair gets wet, it gains weight and gets matted down. The attention to detail even extends to Naughty Dog making sure that the wrinkles on his shirt are realistic, no matter what position his arms are in. Naughty Dog is raising the bar not only for themselves, but for what other developers must live up to in this generation. The team is still working on the project, and it’s scary to think that the visuals could improve beyond their current state when the game ships later this year.

To learn more about Uncharted 4: A Thief's End, click on the banner 
below to enter our hub of exclusive content that we are updating 
throughout the month.

